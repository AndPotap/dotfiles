#! /usr/bin/python3
import os
import subprocess

home = os.environ["HOME"]
location = os.getcwd()
web_location = "/home/andpotap" + location[len(home):]


def rsync(run_dry, server_name):
    code, text = ("nvcr", "Dry run") if run_dry else ("vcr", "Syncing")
    print(f"{text} from {web_location} to \n{location}/*")
    cmd = ["rsync", f"-{code}", f"{server_name}:{web_location}/*", location]
    res = subprocess.run(cmd, text=True,
                         stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    print(res.stdout)


if __name__ == "__main__":
    print("Server to Local")
    ans = input("Sync actual contents (YES - case sensitive) ")
    run_dry = False if ans == "YES" else True
    rsync(run_dry, server_name="webpage")
